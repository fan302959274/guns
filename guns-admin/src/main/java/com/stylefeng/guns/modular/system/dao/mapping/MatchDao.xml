<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stylefeng.guns.modular.system.dao.MatchDao">
    <sql id="Base_Column_List">
        t.id,
        tm.name as challengeteam,
        tm.culture as challengeculture,
        tm.ontime as challengeontime,
        tm.friendly as challengefriendly,
        tm2.name as hostteam,
        tm2.culture as hostculture,
        tm2.ontime as hostontime,
        tm2.friendly as hostfriendly,
        area.area,
        park.pkname as parkname,
        park.pkaddr as pkaddr,
        t.status,
        t.time,
        t.challengepaystatus,
        t.hostpaystatus
    </sql>

    <select id="selects" resultType="map">
        SELECT
        <include refid="Base_Column_List"/>
        FROM pk_match t LEFT JOIN pk_team tm ON t.challengeteamid = tm.id
        LEFT JOIN pk_team tm2 ON t.hostteamid = tm2.id
        LEFT JOIN pk_park park ON t.parkid = park.id
        LEFT JOIN areas area ON park.area = area.id
        where 1=1
        <if test="status != null and status != ''">
            AND t.status=#{status}
        </if>
        <if test="paystatus != null and paystatus != ''">
            AND t.challengepaystatus =#{paystatus}
            AND t.hostpaystatus =#{paystatus}
        </if>
        LIMIT #{start}, #{size}
    </select>

    <select id="selectById" resultType="map">
        SELECT
        <include refid="Base_Column_List"/>
        FROM pk_match t LEFT JOIN pk_team tm ON t.challengeteamid = tm.id
        LEFT JOIN pk_team tm2 ON t.hostteamid = tm2.id
        LEFT JOIN pk_park park ON t.parkid = park.id
        LEFT JOIN areas area ON park.area = area.id
        where t.id=#{id}
    </select>


</mapper>