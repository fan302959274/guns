<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stylefeng.guns.modular.system.dao.OrderDao">
    <sql id="Base_Column_List">
        o.no,t.`name`,a.area,m.`status`,m.createdate
    </sql>

    <select id="selects" resultType="map">
        SELECT
        <include refid="Base_Column_List"/>
        from pk_order o
        left join pk_match m on o.matchid = m.id
        left join pk_team t on o.teamid = t.id
        left join areas a on  t.area = a.id
        where 1=1
        <if test="areas != null and areas != ''">
            AND a.id = #{areas}
        </if>
        <if test="pkstatus != null and pkstatus != ''">
            AND m.`status` = #{pkstatus}
        </if>
        <if test="teamid != null and teamid != ''">
            AND t.id = #{teamid}
        </if>
        <if test="no != null and no != ''">
            AND and o.`no` = #{no}
        </if>
        LIMIT #{start}, #{size}
    </select>

    <select id="selectById" resultType="map">
        SELECT
        <include refid="Base_Column_List"/>
        from pk_order o
        left join pk_match m on o.matchid = m.id
        left join pk_team t on o.teamid = t.id
        left join areas a on  t.area = a.id
        where o.id=#{id}
    </select>


</mapper>